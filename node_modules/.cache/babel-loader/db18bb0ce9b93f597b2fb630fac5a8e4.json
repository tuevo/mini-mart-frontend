{"ast":null,"code":"var _jsxFileName = \"/home/viettran/Desktop/cnpm-19hc-group04/final-project/front-end/src/components/layout/Sidebar/Sidebar.js\";\nimport React, { Component } from 'react';\nimport { Layout, Menu } from 'antd';\nimport { Link, withRouter } from 'react-router-dom';\nimport './Sidebar.style.scss';\nimport UserInfo from './UserInfo/UserInfo';\nimport { connect } from 'react-redux';\nimport * as actions from '../../../redux/actions';\nimport links from '../../../constants/sidebar.constant';\nimport USER_ROLE from '../../../constants/user-role.constant';\nconst {\n  Sider\n} = Layout;\n\nclass Sidebar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentPagePath: '',\n      currentPageIndex: -1\n    };\n  }\n\n  componentWillMount() {\n    const {\n      pagesByUserRole\n    } = this.props;\n    const href = window.location.href.split('?')[0];\n    const position = href.split('/');\n    const currentPath = position[position.length - 1];\n    let currentPageIndex, currentPagePath;\n    pagesByUserRole.forEach((page, index) => {\n      if (page.path === `/${currentPath}`) {\n        currentPageIndex = index;\n        const currentPage = pagesByUserRole[currentPageIndex];\n        currentPagePath = currentPage.path;\n        this.props.setCurrentPageTitle(currentPage.title, currentPage.icon);\n        if (!this.isCommonPage(page.path)) this.props.setSidebarSelection(true);else this.props.setSidebarSelection(false);\n      }\n    });\n\n    if (!this.pageIndex) {\n      currentPageIndex = 0;\n      const {\n        title,\n        icon,\n        path\n      } = pagesByUserRole[currentPageIndex];\n      currentPagePath = path;\n      this.props.setCurrentPageTitle(title, icon);\n      if (!this.isCommonPage(path)) this.props.setSidebarSelection(true);else this.props.setSidebarSelection(false);\n      this.props.history.push(path);\n    }\n\n    this.setState({\n      currentPageIndex,\n      currentPagePath\n    });\n  }\n\n  isCommonPage(path) {\n    const page = links.find(link => link.role === USER_ROLE.USER.role).pages.find(page => page.path === path);\n    return page !== undefined;\n  }\n\n  render() {\n    const {\n      user,\n      pagesByUserRole\n    } = this.props;\n    let {\n      currentPageIndex\n    } = this.state;\n    const {\n      isSidebarSelected\n    } = this.props.app;\n    return React.createElement(Sider, {\n      className: \"sidebar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(UserInfo, {\n      user: user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(Menu, {\n      theme: \"light\",\n      mode: \"inline\",\n      defaultSelectedKeys: [currentPageIndex.toString()],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, pagesByUserRole.map((page, pageIndex) => {\n      const Page = {\n        Icon: page.icon\n      };\n      if (!this.isCommonPage(page.path)) return React.createElement(Menu.Item, {\n        key: pageIndex,\n        className: \"animated slideInLeft\",\n        onClick: () => {\n          this.props.setCurrentPageTitle(page.title, page.icon);\n          this.props.setSidebarSelection(true);\n          this.setState({\n            currentPageIndex: pageIndex,\n            currentPagePath: page.path\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(Page.Icon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"nav-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, page.title), React.createElement(Link, {\n        to: page.path,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }));\n      return null;\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  app: state.app\n});\n\nexport default connect(mapStateToProps, actions)(withRouter(Sidebar));","map":{"version":3,"sources":["/home/viettran/Desktop/cnpm-19hc-group04/final-project/front-end/src/components/layout/Sidebar/Sidebar.js"],"names":["React","Component","Layout","Menu","Link","withRouter","UserInfo","connect","actions","links","USER_ROLE","Sider","Sidebar","constructor","props","state","currentPagePath","currentPageIndex","componentWillMount","pagesByUserRole","href","window","location","split","position","currentPath","length","forEach","page","index","path","currentPage","setCurrentPageTitle","title","icon","isCommonPage","setSidebarSelection","pageIndex","history","push","setState","find","link","role","USER","pages","undefined","render","user","isSidebarSelected","app","toString","map","Page","Icon","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Layout, Menu } from 'antd';\nimport { Link, withRouter } from 'react-router-dom';\nimport './Sidebar.style.scss';\nimport UserInfo from './UserInfo/UserInfo';\nimport { connect } from 'react-redux';\nimport * as actions from '../../../redux/actions';\nimport links from '../../../constants/sidebar.constant';\nimport USER_ROLE from '../../../constants/user-role.constant';\n\nconst { Sider } = Layout;\n\nclass Sidebar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentPagePath: '',\n      currentPageIndex: -1\n    }\n  }\n\n  componentWillMount() {\n    const { pagesByUserRole } = this.props;\n    const href = window.location.href.split('?')[0];\n    const position = href.split('/');\n    const currentPath = position[position.length - 1];\n\n    let currentPageIndex, currentPagePath;\n    pagesByUserRole.forEach((page, index) => {\n      if (page.path === `/${currentPath}`) {\n        currentPageIndex = index;\n        const currentPage = pagesByUserRole[currentPageIndex];\n        currentPagePath = currentPage.path;\n        this.props.setCurrentPageTitle(currentPage.title, currentPage.icon);\n\n        if (!this.isCommonPage(page.path))\n          this.props.setSidebarSelection(true);\n        else this.props.setSidebarSelection(false);\n      }\n    });\n\n    if (!this.pageIndex) {\n      currentPageIndex = 0;\n      const { title, icon, path } = pagesByUserRole[currentPageIndex];\n      currentPagePath = path;\n      this.props.setCurrentPageTitle(title, icon);\n\n      if (!this.isCommonPage(path))\n        this.props.setSidebarSelection(true);\n      else this.props.setSidebarSelection(false);\n\n      this.props.history.push(path);\n    }\n\n    this.setState({ currentPageIndex, currentPagePath });\n  }\n\n  isCommonPage(path) {\n    const page = links.find(link => link.role === USER_ROLE.USER.role).pages.find(page => page.path === path);\n    return page !== undefined;\n  }\n\n  render() {\n    const { user, pagesByUserRole } = this.props;\n    let { currentPageIndex } = this.state;\n    const { isSidebarSelected } = this.props.app;\n\n    return (\n      <Sider className=\"sidebar\">\n        <UserInfo user={user} />\n        <Menu theme='light' mode='inline' defaultSelectedKeys={[currentPageIndex.toString()]}>\n          {pagesByUserRole.map((page, pageIndex) => {\n            const Page = { Icon: page.icon };\n            if (!this.isCommonPage(page.path))\n              return (\n                <Menu.Item key={pageIndex} className=\"animated slideInLeft\"\n                  onClick={() => {\n                    this.props.setCurrentPageTitle(page.title, page.icon);\n                    this.props.setSidebarSelection(true);\n                    this.setState({ currentPageIndex: pageIndex, currentPagePath: page.path })\n                  }}>\n                  <Page.Icon />\n                  <span className='nav-text'>{page.title}</span>\n                  <Link to={page.path} />\n                </Menu.Item>\n              )\n            return null;\n          })}\n        </Menu>\n      </Sider>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  app: state.app\n});\n\nexport default connect(mapStateToProps, actions)(withRouter(Sidebar));"]},"metadata":{},"sourceType":"module"}