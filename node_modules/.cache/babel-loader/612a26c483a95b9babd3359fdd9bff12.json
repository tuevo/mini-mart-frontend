{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport isEqual from 'lodash/isEqual';\nimport classNames from 'classnames';\nimport { Field } from 'rc-field-form';\nimport omit from 'omit.js';\nimport Row from '../grid/row';\nimport { ConfigContext } from '../config-provider';\nimport { tuple } from '../_util/type';\nimport warning from '../_util/warning';\nimport FormItemLabel from './FormItemLabel';\nimport FormItemInput from './FormItemInput';\nimport { FormContext, FormItemContext } from './context';\nimport { toArray, getFieldId } from './util';\nvar ValidateStatuses = tuple('success', 'warning', 'error', 'validating', '');\n\nfunction hasValidName(name) {\n  if (name === null) {\n    warning(false, 'Form.Item', '`null` is passed as `name` property');\n  }\n\n  return !(name === undefined || name === null);\n}\n\nfunction FormItem(props) {\n  var name = props.name,\n      fieldKey = props.fieldKey,\n      noStyle = props.noStyle,\n      dependencies = props.dependencies,\n      customizePrefixCls = props.prefixCls,\n      style = props.style,\n      className = props.className,\n      shouldUpdate = props.shouldUpdate,\n      hasFeedback = props.hasFeedback,\n      help = props.help,\n      rules = props.rules,\n      validateStatus = props.validateStatus,\n      children = props.children,\n      required = props.required,\n      _props$trigger = props.trigger,\n      trigger = _props$trigger === void 0 ? 'onChange' : _props$trigger,\n      _props$validateTrigge = props.validateTrigger,\n      validateTrigger = _props$validateTrigge === void 0 ? 'onChange' : _props$validateTrigge,\n      restProps = __rest(props, [\"name\", \"fieldKey\", \"noStyle\", \"dependencies\", \"prefixCls\", \"style\", \"className\", \"shouldUpdate\", \"hasFeedback\", \"help\", \"rules\", \"validateStatus\", \"children\", \"required\", \"trigger\", \"validateTrigger\"]);\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls;\n\n  var formContext = React.useContext(FormContext);\n\n  var _React$useContext2 = React.useContext(FormItemContext),\n      updateItemErrors = _React$useContext2.updateItemErrors;\n\n  var _React$useState = React.useState(!!help),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      domErrorVisible = _React$useState2[0],\n      setDomErrorVisible = _React$useState2[1];\n\n  var _React$useState3 = React.useState({}),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      inlineErrors = _React$useState4[0],\n      setInlineErrors = _React$useState4[1];\n\n  var formName = formContext.name;\n  var hasName = hasValidName(name); // Cache Field NamePath\n\n  var nameRef = React.useRef([]); // Should clean up if Field removed\n\n  React.useEffect(function () {\n    return function () {\n      updateItemErrors(nameRef.current.join('__SPLIT__'), []);\n    };\n  }, []);\n  var prefixCls = getPrefixCls('form', customizePrefixCls); // ======================== Errors ========================\n  // Collect noStyle Field error to the top FormItem\n\n  var updateChildItemErrors = noStyle ? updateItemErrors : function (subName, subErrors) {\n    if (!isEqual(inlineErrors[subName], subErrors)) {\n      Promise.resolve().then(function () {\n        setInlineErrors(_extends(_extends({}, inlineErrors), _defineProperty({}, subName, subErrors)));\n      });\n    }\n  };\n\n  function renderLayout(baseChildren, fieldId, meta, isRequired) {\n    var _itemClassName;\n\n    if (noStyle) {\n      return baseChildren;\n    } // ======================== Errors ========================\n\n\n    var mergedErrors;\n\n    if (help !== undefined && help !== null) {\n      mergedErrors = toArray(help);\n    } else {\n      mergedErrors = meta ? meta.errors : [];\n      Object.keys(inlineErrors).forEach(function (subName) {\n        var subErrors = inlineErrors[subName] || [];\n\n        if (subErrors.length) {\n          mergedErrors = [].concat(_toConsumableArray(mergedErrors), _toConsumableArray(subErrors));\n        }\n      });\n    } // ======================== Status ========================\n\n\n    var mergedValidateStatus = '';\n\n    if (validateStatus !== undefined) {\n      mergedValidateStatus = validateStatus;\n    } else if (meta && meta.validating) {\n      mergedValidateStatus = 'validating';\n    } else if (!help && mergedErrors.length) {\n      mergedValidateStatus = 'error';\n    } else if (meta && meta.touched) {\n      mergedValidateStatus = 'success';\n    }\n\n    var itemClassName = (_itemClassName = {}, _defineProperty(_itemClassName, \"\".concat(prefixCls, \"-item\"), true), _defineProperty(_itemClassName, \"\".concat(prefixCls, \"-item-with-help\"), domErrorVisible || help), _defineProperty(_itemClassName, \"\".concat(className), !!className), _defineProperty(_itemClassName, \"\".concat(prefixCls, \"-item-has-feedback\"), mergedValidateStatus && hasFeedback), _defineProperty(_itemClassName, \"\".concat(prefixCls, \"-item-has-success\"), mergedValidateStatus === 'success'), _defineProperty(_itemClassName, \"\".concat(prefixCls, \"-item-has-warning\"), mergedValidateStatus === 'warning'), _defineProperty(_itemClassName, \"\".concat(prefixCls, \"-item-has-error\"), mergedValidateStatus === 'error'), _defineProperty(_itemClassName, \"\".concat(prefixCls, \"-item-has-error-leave\"), !help && domErrorVisible && mergedValidateStatus !== 'error'), _defineProperty(_itemClassName, \"\".concat(prefixCls, \"-item-is-validating\"), mergedValidateStatus === 'validating'), _itemClassName); // ======================= Children =======================\n\n    return React.createElement(Row, _extends({\n      className: classNames(itemClassName),\n      style: style,\n      key: \"row\"\n    }, omit(restProps, ['colon', 'extra', 'getValueFromEvent', 'hasFeedback', 'help', 'htmlFor', 'id', 'label', 'labelAlign', 'labelCol', 'normalize', 'required', 'validateFirst', 'validateStatus', 'valuePropName', 'wrapperCol'])), React.createElement(FormItemLabel, _extends({\n      htmlFor: fieldId,\n      required: isRequired\n    }, props, {\n      prefixCls: prefixCls\n    })), React.createElement(FormItemInput, _extends({}, props, meta, {\n      errors: mergedErrors,\n      prefixCls: prefixCls,\n      onDomErrorVisibleChange: setDomErrorVisible,\n      validateStatus: mergedValidateStatus\n    }), React.createElement(FormItemContext.Provider, {\n      value: {\n        updateItemErrors: updateChildItemErrors\n      }\n    }, baseChildren)));\n  }\n\n  var isRenderProps = typeof children === 'function';\n\n  if (!hasName && !isRenderProps && !dependencies) {\n    return renderLayout(children);\n  }\n\n  return React.createElement(Field, _extends({}, props, {\n    trigger: trigger,\n    validateTrigger: validateTrigger,\n    onReset: function onReset() {\n      setDomErrorVisible(false);\n    }\n  }), function (control, meta, context) {\n    var errors = meta.errors;\n    var mergedName = toArray(name).length && meta ? meta.name : [];\n    var fieldId = getFieldId(mergedName, formName);\n\n    if (noStyle) {\n      nameRef.current = _toConsumableArray(mergedName);\n\n      if (fieldKey) {\n        nameRef.current[nameRef.current.length - 1] = fieldKey;\n      }\n\n      updateItemErrors(nameRef.current.join('__SPLIT__'), errors);\n    }\n\n    var isRequired = required !== undefined ? required : !!(rules && rules.some(function (rule) {\n      if (rule && _typeof(rule) === 'object' && rule.required) {\n        return true;\n      }\n\n      if (typeof rule === 'function') {\n        var ruleEntity = rule(context);\n        return ruleEntity && ruleEntity.required;\n      }\n\n      return false;\n    })); // ======================= Children =======================\n\n    var mergedControl = _extends(_extends({}, control), {\n      id: fieldId\n    });\n\n    var childNode = null;\n\n    if (Array.isArray(children) && hasName) {\n      warning(false, 'Form.Item', '`children` is array of render props cannot have `name`.');\n      childNode = children;\n    } else if (isRenderProps && (!shouldUpdate || hasName)) {\n      warning(!!shouldUpdate, 'Form.Item', '`children` of render props only work with `shouldUpdate`.');\n      warning(!hasName, 'Form.Item', \"Do not use `name` with `children` of render props since it's not a field.\");\n    } else if (dependencies && !isRenderProps && !hasName) {\n      warning(false, 'Form.Item', 'Must set `name` or use render props when `dependencies` is set.');\n    } else if (React.isValidElement(children)) {\n      var childProps = _extends(_extends({}, children.props), mergedControl); // We should keep user origin event handler\n\n\n      var triggers = new Set();\n      [].concat(_toConsumableArray(toArray(trigger)), _toConsumableArray(toArray(validateTrigger))).forEach(function (eventName) {\n        triggers.add(eventName);\n      });\n      triggers.forEach(function (eventName) {\n        childProps[eventName] = function () {\n          var _a2, _c2;\n\n          var _a, _b, _c;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          (_a = mergedControl[eventName]) === null || _a === void 0 ? void 0 : (_a2 = _a).call.apply(_a2, [mergedControl].concat(args));\n          (_c = (_b = children.props)[eventName]) === null || _c === void 0 ? void 0 : (_c2 = _c).call.apply(_c2, [_b].concat(args));\n        };\n      });\n      childNode = React.cloneElement(children, childProps);\n    } else if (isRenderProps && shouldUpdate && !hasName) {\n      childNode = children(context);\n    } else {\n      warning(!mergedName.length, 'Form.Item', '`name` is only used for validate React element. If you are using Form.Item as layout display, please remove `name` instead.');\n      childNode = children;\n    }\n\n    return renderLayout(childNode, fieldId, meta, isRequired);\n  });\n}\n\nexport default FormItem;","map":{"version":3,"sources":["form/FormItem.jsx"],"names":["__rest","t","Object","e","s","i","p","ValidateStatuses","tuple","name","warning","fieldKey","noStyle","dependencies","customizePrefixCls","style","className","shouldUpdate","hasFeedback","help","rules","validateStatus","children","required","trigger","validateTrigger","props","restProps","getPrefixCls","React","formContext","updateItemErrors","domErrorVisible","setDomErrorVisible","inlineErrors","setInlineErrors","formName","hasName","hasValidName","nameRef","prefixCls","updateChildItemErrors","isEqual","Promise","mergedErrors","toArray","meta","subErrors","mergedValidateStatus","itemClassName","classNames","omit","isRequired","isRenderProps","renderLayout","errors","mergedName","fieldId","getFieldId","rule","ruleEntity","mergedControl","id","childNode","Array","childProps","triggers","args","_a","_c","_b"],"mappings":"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","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport isEqual from 'lodash/isEqual';\nimport classNames from 'classnames';\nimport { Field } from 'rc-field-form';\nimport omit from 'omit.js';\nimport Row from '../grid/row';\nimport { ConfigContext } from '../config-provider';\nimport { tuple } from '../_util/type';\nimport warning from '../_util/warning';\nimport FormItemLabel from './FormItemLabel';\nimport FormItemInput from './FormItemInput';\nimport { FormContext, FormItemContext } from './context';\nimport { toArray, getFieldId } from './util';\nconst ValidateStatuses = tuple('success', 'warning', 'error', 'validating', '');\nfunction hasValidName(name) {\n    if (name === null) {\n        warning(false, 'Form.Item', '`null` is passed as `name` property');\n    }\n    return !(name === undefined || name === null);\n}\nfunction FormItem(props) {\n    const { name, fieldKey, noStyle, dependencies, prefixCls: customizePrefixCls, style, className, shouldUpdate, hasFeedback, help, rules, validateStatus, children, required, trigger = 'onChange', validateTrigger = 'onChange' } = props, restProps = __rest(props, [\"name\", \"fieldKey\", \"noStyle\", \"dependencies\", \"prefixCls\", \"style\", \"className\", \"shouldUpdate\", \"hasFeedback\", \"help\", \"rules\", \"validateStatus\", \"children\", \"required\", \"trigger\", \"validateTrigger\"]);\n    const { getPrefixCls } = React.useContext(ConfigContext);\n    const formContext = React.useContext(FormContext);\n    const { updateItemErrors } = React.useContext(FormItemContext);\n    const [domErrorVisible, setDomErrorVisible] = React.useState(!!help);\n    const [inlineErrors, setInlineErrors] = React.useState({});\n    const { name: formName } = formContext;\n    const hasName = hasValidName(name);\n    // Cache Field NamePath\n    const nameRef = React.useRef([]);\n    // Should clean up if Field removed\n    React.useEffect(() => {\n        return () => {\n            updateItemErrors(nameRef.current.join('__SPLIT__'), []);\n        };\n    }, []);\n    const prefixCls = getPrefixCls('form', customizePrefixCls);\n    // ======================== Errors ========================\n    // Collect noStyle Field error to the top FormItem\n    const updateChildItemErrors = noStyle\n        ? updateItemErrors\n        : (subName, subErrors) => {\n            if (!isEqual(inlineErrors[subName], subErrors)) {\n                Promise.resolve().then(() => {\n                    setInlineErrors(Object.assign(Object.assign({}, inlineErrors), { [subName]: subErrors }));\n                });\n            }\n        };\n    function renderLayout(baseChildren, fieldId, meta, isRequired) {\n        if (noStyle) {\n            return baseChildren;\n        }\n        // ======================== Errors ========================\n        let mergedErrors;\n        if (help !== undefined && help !== null) {\n            mergedErrors = toArray(help);\n        }\n        else {\n            mergedErrors = meta ? meta.errors : [];\n            Object.keys(inlineErrors).forEach(subName => {\n                const subErrors = inlineErrors[subName] || [];\n                if (subErrors.length) {\n                    mergedErrors = [...mergedErrors, ...subErrors];\n                }\n            });\n        }\n        // ======================== Status ========================\n        let mergedValidateStatus = '';\n        if (validateStatus !== undefined) {\n            mergedValidateStatus = validateStatus;\n        }\n        else if (meta && meta.validating) {\n            mergedValidateStatus = 'validating';\n        }\n        else if (!help && mergedErrors.length) {\n            mergedValidateStatus = 'error';\n        }\n        else if (meta && meta.touched) {\n            mergedValidateStatus = 'success';\n        }\n        const itemClassName = {\n            [`${prefixCls}-item`]: true,\n            [`${prefixCls}-item-with-help`]: domErrorVisible || help,\n            [`${className}`]: !!className,\n            // Status\n            [`${prefixCls}-item-has-feedback`]: mergedValidateStatus && hasFeedback,\n            [`${prefixCls}-item-has-success`]: mergedValidateStatus === 'success',\n            [`${prefixCls}-item-has-warning`]: mergedValidateStatus === 'warning',\n            [`${prefixCls}-item-has-error`]: mergedValidateStatus === 'error',\n            [`${prefixCls}-item-has-error-leave`]: !help && domErrorVisible && mergedValidateStatus !== 'error',\n            [`${prefixCls}-item-is-validating`]: mergedValidateStatus === 'validating',\n        };\n        // ======================= Children =======================\n        return (<Row className={classNames(itemClassName)} style={style} key=\"row\" {...omit(restProps, [\n            'colon',\n            'extra',\n            'getValueFromEvent',\n            'hasFeedback',\n            'help',\n            'htmlFor',\n            'id',\n            'label',\n            'labelAlign',\n            'labelCol',\n            'normalize',\n            'required',\n            'validateFirst',\n            'validateStatus',\n            'valuePropName',\n            'wrapperCol',\n        ])}>\n        \n        <FormItemLabel htmlFor={fieldId} required={isRequired} {...props} prefixCls={prefixCls}/>\n        \n        <FormItemInput {...props} {...meta} errors={mergedErrors} prefixCls={prefixCls} onDomErrorVisibleChange={setDomErrorVisible} validateStatus={mergedValidateStatus}>\n          <FormItemContext.Provider value={{ updateItemErrors: updateChildItemErrors }}>\n            {baseChildren}\n          </FormItemContext.Provider>\n        </FormItemInput>\n      </Row>);\n    }\n    const isRenderProps = typeof children === 'function';\n    if (!hasName && !isRenderProps && !dependencies) {\n        return renderLayout(children);\n    }\n    return (<Field {...props} trigger={trigger} validateTrigger={validateTrigger} onReset={() => {\n        setDomErrorVisible(false);\n    }}>\n      {(control, meta, context) => {\n        const { errors } = meta;\n        const mergedName = toArray(name).length && meta ? meta.name : [];\n        const fieldId = getFieldId(mergedName, formName);\n        if (noStyle) {\n            nameRef.current = [...mergedName];\n            if (fieldKey) {\n                nameRef.current[nameRef.current.length - 1] = fieldKey;\n            }\n            updateItemErrors(nameRef.current.join('__SPLIT__'), errors);\n        }\n        const isRequired = required !== undefined\n            ? required\n            : !!(rules &&\n                rules.some(rule => {\n                    if (rule && typeof rule === 'object' && rule.required) {\n                        return true;\n                    }\n                    if (typeof rule === 'function') {\n                        const ruleEntity = rule(context);\n                        return ruleEntity && ruleEntity.required;\n                    }\n                    return false;\n                }));\n        // ======================= Children =======================\n        const mergedControl = Object.assign(Object.assign({}, control), { id: fieldId });\n        let childNode = null;\n        if (Array.isArray(children) && hasName) {\n            warning(false, 'Form.Item', '`children` is array of render props cannot have `name`.');\n            childNode = children;\n        }\n        else if (isRenderProps && (!shouldUpdate || hasName)) {\n            warning(!!shouldUpdate, 'Form.Item', '`children` of render props only work with `shouldUpdate`.');\n            warning(!hasName, 'Form.Item', \"Do not use `name` with `children` of render props since it's not a field.\");\n        }\n        else if (dependencies && !isRenderProps && !hasName) {\n            warning(false, 'Form.Item', 'Must set `name` or use render props when `dependencies` is set.');\n        }\n        else if (React.isValidElement(children)) {\n            const childProps = Object.assign(Object.assign({}, children.props), mergedControl);\n            // We should keep user origin event handler\n            const triggers = new Set();\n            [...toArray(trigger), ...toArray(validateTrigger)].forEach(eventName => {\n                triggers.add(eventName);\n            });\n            triggers.forEach(eventName => {\n                childProps[eventName] = (...args) => {\n                    var _a, _b, _c;\n                    (_a = mergedControl[eventName]) === null || _a === void 0 ? void 0 : _a.call(mergedControl, ...args);\n                    (_c = (_b = children.props)[eventName]) === null || _c === void 0 ? void 0 : _c.call(_b, ...args);\n                };\n            });\n            childNode = React.cloneElement(children, childProps);\n        }\n        else if (isRenderProps && shouldUpdate && !hasName) {\n            childNode = children(context);\n        }\n        else {\n            warning(!mergedName.length, 'Form.Item', '`name` is only used for validate React element. If you are using Form.Item as layout display, please remove `name` instead.');\n            childNode = children;\n        }\n        return renderLayout(childNode, fieldId, meta, isRequired);\n    }}\n    </Field>);\n}\nexport default FormItem;\n"]},"metadata":{},"sourceType":"module"}