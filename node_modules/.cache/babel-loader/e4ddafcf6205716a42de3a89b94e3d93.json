{"ast":null,"code":"var _jsxFileName = \"/home/viettran/Desktop/cnpm-19hc-group04/final-project/front-end/src/components/pages/Cashier/CheckoutPanel/CheckoutPanel.js\";\nimport React from 'react';\nimport './CheckoutPanel.style.scss';\nimport { Menu, Modal, message } from 'antd';\nimport { QuestionCircleOutlined, HistoryOutlined, QrcodeOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\nimport MoneyCounting from '../MoneyCounting/MoneyCounting';\nimport TransactionHistory from '../TransactionHistory/TransactionHistory';\nimport { connect } from 'react-redux';\nimport { API } from '../../../../constants/api.constant';\nimport { COOKIE_NAMES } from '../../../../constants/cookie-name.constant';\nimport * as actions from '../../../../redux/actions';\nimport { withCookies } from 'react-cookie';\nimport PageBase from '../../../utilities/PageBase/PageBase';\nconst navbarMenuItems = [{\n  key: '1',\n  title: 'Tính tiền cho khách',\n  icon: QrcodeOutlined\n}, {\n  key: '2',\n  title: 'Lịch sử yêu cầu nhập hàng',\n  icon: QuestionCircleOutlined\n}, {\n  key: '3',\n  title: 'Lịch sử giao dịch',\n  icon: HistoryOutlined\n}];\nconst {\n  confirm\n} = Modal;\n\nclass CheckoutPanel extends PageBase {\n  constructor(props) {\n    super(props);\n\n    this.toggleCollapsed = () => {\n      this.setState({\n        collapsed: !this.state.collapsed\n      });\n    };\n\n    this.state = {\n      collapsed: false,\n      selectedMenuItem: { ...navbarMenuItems[0]\n      },\n      onWorking: false,\n      checkoutSessionID: ''\n    };\n  }\n\n  setCheckoutSessionID(id) {\n    this.setState({\n      checkoutSessionID: id\n    });\n  }\n\n  handleSelectMenuItem(e) {\n    const {\n      key\n    } = e;\n\n    if (key === this.state.selectedMenuItem.key) {\n      message.warning('Đang thao tác, vui lòng thoát khỏi');\n      return;\n    }\n\n    if (!this.state.onWorking) {\n      this.setState({\n        selectedMenuItem: navbarMenuItems.find(item => item.key === key)\n      });\n      return;\n    } // const that = this;\n    // confirm({\n    //   title: `Đang thao tác, bạn có muốn rời khỏi?`,\n    //   icon: <ExclamationCircleOutlined />,\n    //   content: '',\n    //   okText: 'Đồng ý',\n    //   okType: 'danger',\n    //   cancelText: 'Không, cảm ơn',\n    //   onOk() {\n    //     that.cancelCheckoutSession(key);\n    //   }\n    // });\n\n  }\n\n  setOnWorking(onWorking) {\n    this.setState({\n      onWorking\n    });\n  }\n\n  async cancelCheckoutSession(key) {\n    this.props.setAppLoading(true);\n    const res = await (await fetch(API.Cashier.Checkout.cancelCheckoutSession.replace('{checkoutSessionID}', this.state.checkoutSessionID), {\n      method: 'DELETE',\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8',\n        'token': this.props.cookies.get(COOKIE_NAMES.token)\n      },\n      signal: this.abortController.signal\n    })).json();\n    this.props.setAppLoading(false);\n\n    if (res.status !== 200) {\n      message.error(res.errors[0]);\n      return;\n    }\n\n    this.setState({\n      selectedMenuItem: navbarMenuItems.find(item => item.key === key),\n      onWorking: false,\n      checkoutSessionID: ''\n    });\n    message.success(res.messages[0]);\n  }\n\n  render() {\n    const {\n      selectedMenuItem\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: \"checkout-panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"checkout-panel__main-board\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"checkout-panel__main-board__navbar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Menu, {\n      defaultSelectedKeys: ['1'],\n      mode: \"inline\",\n      theme: \"dark\",\n      inlineCollapsed: true,\n      onClick: e => this.handleSelectMenuItem(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, navbarMenuItems.map(item => React.createElement(Menu.Item, {\n      key: item.key,\n      className: `checkout-panel__main-board__navbar__item animated bounceIn ${selectedMenuItem.key === item.key ? 'checkout-panel__main-board__navbar__item--selected' : ''}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(item.icon, {\n      className: \"checkout-panel__main-board__navbar__item__icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, item.title))))), React.createElement(\"div\", {\n      className: \"checkout-panel__main-board__content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, selectedMenuItem.key === '1' ? React.createElement(MoneyCounting, {\n      setCheckoutPanelOnWorking: onWorking => this.setOnWorking(onWorking),\n      setCheckoutPanelCheckoutSessionID: checkoutSessionID => this.setCheckoutSessionID(checkoutSessionID),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }) : React.createElement(React.Fragment, null), selectedMenuItem.key === '3' ? React.createElement(TransactionHistory, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }) : React.createElement(React.Fragment, null))));\n  }\n\n}\n\nexport default connect(null, actions)(withCookies(CheckoutPanel));","map":{"version":3,"sources":["/home/viettran/Desktop/cnpm-19hc-group04/final-project/front-end/src/components/pages/Cashier/CheckoutPanel/CheckoutPanel.js"],"names":["React","Menu","Modal","message","QuestionCircleOutlined","HistoryOutlined","QrcodeOutlined","ExclamationCircleOutlined","MoneyCounting","TransactionHistory","connect","API","COOKIE_NAMES","actions","withCookies","PageBase","navbarMenuItems","key","title","icon","confirm","CheckoutPanel","constructor","props","toggleCollapsed","setState","collapsed","state","selectedMenuItem","onWorking","checkoutSessionID","setCheckoutSessionID","id","handleSelectMenuItem","e","warning","find","item","setOnWorking","cancelCheckoutSession","setAppLoading","res","fetch","Cashier","Checkout","replace","method","headers","cookies","get","token","signal","abortController","json","status","error","errors","success","messages","render","map"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './CheckoutPanel.style.scss';\nimport { Menu, Modal, message } from 'antd';\nimport {\n  QuestionCircleOutlined,\n  HistoryOutlined,\n  QrcodeOutlined,\n  ExclamationCircleOutlined\n} from '@ant-design/icons';\nimport MoneyCounting from '../MoneyCounting/MoneyCounting';\nimport TransactionHistory from '../TransactionHistory/TransactionHistory';\nimport { connect } from 'react-redux';\nimport { API } from '../../../../constants/api.constant';\nimport { COOKIE_NAMES } from '../../../../constants/cookie-name.constant';\nimport * as actions from '../../../../redux/actions';\nimport { withCookies } from 'react-cookie';\nimport PageBase from '../../../utilities/PageBase/PageBase';\n\nconst navbarMenuItems = [\n  {\n    key: '1',\n    title: 'Tính tiền cho khách',\n    icon: QrcodeOutlined\n  },\n  {\n    key: '2',\n    title: 'Lịch sử yêu cầu nhập hàng',\n    icon: QuestionCircleOutlined\n  },\n  {\n    key: '3',\n    title: 'Lịch sử giao dịch',\n    icon: HistoryOutlined\n  }\n];\n\nconst { confirm } = Modal;\n\nclass CheckoutPanel extends PageBase {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      collapsed: false,\n      selectedMenuItem: { ...navbarMenuItems[0] },\n      onWorking: false,\n      checkoutSessionID: ''\n    }\n  }\n\n  toggleCollapsed = () => {\n    this.setState({\n      collapsed: !this.state.collapsed,\n    });\n  };\n\n  setCheckoutSessionID(id) {\n    this.setState({ checkoutSessionID: id });\n  }\n\n  handleSelectMenuItem(e) {\n    const { key } = e;\n\n    if (key === this.state.selectedMenuItem.key) {\n      message.warning('Đang thao tác, vui lòng thoát khỏi');\n      return;\n    }\n\n    if (!this.state.onWorking) {\n      this.setState({ selectedMenuItem: navbarMenuItems.find(item => item.key === key) });\n      return;\n    }\n\n    // const that = this;\n    // confirm({\n    //   title: `Đang thao tác, bạn có muốn rời khỏi?`,\n    //   icon: <ExclamationCircleOutlined />,\n    //   content: '',\n    //   okText: 'Đồng ý',\n    //   okType: 'danger',\n    //   cancelText: 'Không, cảm ơn',\n    //   onOk() {\n    //     that.cancelCheckoutSession(key);\n    //   }\n    // });\n  }\n\n  setOnWorking(onWorking) {\n    this.setState({ onWorking });\n  }\n\n  async cancelCheckoutSession(key) {\n    this.props.setAppLoading(true);\n    const res = await (\n      await fetch(\n        API.Cashier.Checkout.cancelCheckoutSession.replace('{checkoutSessionID}', this.state.checkoutSessionID),\n        {\n          method: 'DELETE',\n          headers: {\n            'Content-type': 'application/json; charset=UTF-8',\n            'token': this.props.cookies.get(COOKIE_NAMES.token)\n          },\n          signal: this.abortController.signal\n        }\n      )\n    ).json();\n\n    this.props.setAppLoading(false);\n    if (res.status !== 200) {\n      message.error(res.errors[0]);\n      return;\n    }\n\n    this.setState({\n      selectedMenuItem: navbarMenuItems.find(item => item.key === key),\n      onWorking: false,\n      checkoutSessionID: ''\n    });\n    message.success(res.messages[0]);\n  }\n\n  render() {\n    const { selectedMenuItem } = this.state;\n    return (\n      <div className=\"checkout-panel\">\n        <div className=\"checkout-panel__main-board\">\n          <div className=\"checkout-panel__main-board__navbar\">\n            <Menu\n              defaultSelectedKeys={['1']}\n              mode=\"inline\"\n              theme=\"dark\"\n              inlineCollapsed={true}\n              onClick={e => this.handleSelectMenuItem(e)}\n            >\n              {navbarMenuItems.map(item => (\n                <Menu.Item key={item.key}\n                  className={`checkout-panel__main-board__navbar__item animated bounceIn ${selectedMenuItem.key === item.key ?\n                    'checkout-panel__main-board__navbar__item--selected' : ''}`}\n                >\n                  <item.icon className=\"checkout-panel__main-board__navbar__item__icon\" />\n                  <span>{item.title}</span>\n                </Menu.Item>\n              ))}\n            </Menu>\n          </div>\n          <div className=\"checkout-panel__main-board__content\">\n            {selectedMenuItem.key === '1' ? (\n              <MoneyCounting\n                setCheckoutPanelOnWorking={onWorking => this.setOnWorking(onWorking)}\n                setCheckoutPanelCheckoutSessionID={checkoutSessionID => this.setCheckoutSessionID(checkoutSessionID)}\n              />\n            ) : <></>}\n\n            {selectedMenuItem.key === '3' ? (\n              <TransactionHistory\n\n              />\n            ) : <></>}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\nexport default connect(null, actions)(withCookies(CheckoutPanel));"]},"metadata":{},"sourceType":"module"}