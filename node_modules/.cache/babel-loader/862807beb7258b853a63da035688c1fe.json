{"ast":null,"code":"var _jsxFileName = \"/home/viettran/Desktop/cnpm-19hc-group04/final-project/front-end/src/components/pages/Cashier/TransactionHistory/TransactionHistory.js\";\nimport React from 'react';\nimport './TransactionHistory.style.scss';\nimport { withCookies } from 'react-cookie';\nimport { connect } from 'react-redux';\nimport * as actions from '../../../../redux/actions';\nimport { HistoryOutlined } from '@ant-design/icons';\nimport { Timeline, Empty, message } from 'antd';\nimport moment from 'moment';\nimport NumberFormat from 'react-number-format';\nimport { COOKIE_NAMES } from '../../../../constants/cookie-name.constant';\nimport { API } from '../../../../constants/api.constant';\nimport PageBase from '../../../utilities/PageBase/PageBase';\n\nclass TransactionHistory extends PageBase {\n  constructor(props) {\n    super(props);\n    this.state = {\n      checkoutSessions: []\n    };\n  }\n\n  componentDidMount() {\n    this.loadCheckoutSessions();\n  }\n\n  async loadCheckoutSessions() {\n    this.props.setAppLoading(true);\n    const res = await (await fetch(API.Cashier.Checkout.getCheckoutSessions, {\n      method: 'GET',\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8',\n        'token': this.props.cookies.get(COOKIE_NAMES.token)\n      },\n      signal: this.abortController.signal\n    })).json();\n    this.props.setAppLoading(false);\n\n    if (res.status !== 200) {\n      message.error(res.errors[0]);\n      return;\n    }\n\n    this.setState({\n      checkoutSessions: res.data.checkoutSessions\n    });\n  }\n\n  render() {\n    const {\n      checkoutSessions\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: \"transaction-history animated fadeIn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"transaction-history__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"transaction-history__header__title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(HistoryOutlined, {\n      className: \"transaction-history__header__title__icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"transaction-history__header__title__text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"L\\u1ECBch s\\u1EED giao d\\u1ECBch\"))), React.createElement(\"div\", {\n      className: \"transaction-history__content animated bounceInUp\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"transaction-history__content__timeline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, checkoutSessions.length === 0 ? React.createElement(\"div\", {\n      className: \"transaction-history__content__timeline__empty\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(Empty, {\n      description: \"Ch\\u01B0a c\\xF3 ghi nh\\u1EADn n\\xE0o\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    })) : React.createElement(Timeline, {\n      mode: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, checkoutSessions.map(cs => {\n      return cs.soldItems.length > 0 ? React.createElement(Timeline.Item, {\n        key: cs._id,\n        label: cs.submittedAt ? moment(cs.submittedAt).format('DD-MM-YYYY HH:mm') : moment().format('DD-MM-YYYY HH:mm'),\n        color: \"#ff8220\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"transaction-history__content__timeline__item animated bounceIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"transaction-history__content__timeline__item__list-products\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, cs.soldItems.map((item, index) => {\n        return index < cs.soldItems.length - 1 ? React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, `${item.product.name} x${item.quantity}, `) : React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, `${item.product.name} x${item.quantity}.`);\n      })), React.createElement(\"div\", {\n        className: \"transaction-history__content__timeline__item__price-total\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"transaction-history__content__timeline__item__price-total__label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"T\\u1ED5ng ti\\u1EC1n:\"), React.createElement(NumberFormat, {\n        className: \"transaction-history__content__timeline__item__price-total__number\",\n        value: Number(cs.priceTotal),\n        displayType: \"text\",\n        thousandSeparator: true,\n        suffix: \" VN\\u0110\",\n        style: {\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      })))) : React.createElement(React.Fragment, null);\n    })))));\n  }\n\n}\n\nexport default connect(null, actions)(withCookies(TransactionHistory));","map":{"version":3,"sources":["/home/viettran/Desktop/cnpm-19hc-group04/final-project/front-end/src/components/pages/Cashier/TransactionHistory/TransactionHistory.js"],"names":["React","withCookies","connect","actions","HistoryOutlined","Timeline","Empty","message","moment","NumberFormat","COOKIE_NAMES","API","PageBase","TransactionHistory","constructor","props","state","checkoutSessions","componentDidMount","loadCheckoutSessions","setAppLoading","res","fetch","Cashier","Checkout","getCheckoutSessions","method","headers","cookies","get","token","signal","abortController","json","status","error","errors","setState","data","render","length","map","cs","soldItems","_id","submittedAt","format","item","index","product","name","quantity","Number","priceTotal","fontWeight"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './TransactionHistory.style.scss';\nimport { withCookies } from 'react-cookie';\nimport { connect } from 'react-redux';\nimport * as actions from '../../../../redux/actions';\nimport { HistoryOutlined } from '@ant-design/icons';\nimport { Timeline, Empty, message } from 'antd';\nimport moment from 'moment';\nimport NumberFormat from 'react-number-format';\nimport { COOKIE_NAMES } from '../../../../constants/cookie-name.constant';\nimport { API } from '../../../../constants/api.constant';\nimport PageBase from '../../../utilities/PageBase/PageBase';\n\nclass TransactionHistory extends PageBase {\n  constructor(props) {\n    super(props);\n    this.state = {\n      checkoutSessions: []\n    }\n  }\n\n  componentDidMount() {\n    this.loadCheckoutSessions();\n  }\n\n  async loadCheckoutSessions() {\n    this.props.setAppLoading(true);\n    const res = await (\n      await fetch(\n        API.Cashier.Checkout.getCheckoutSessions,\n        {\n          method: 'GET',\n          headers: {\n            'Content-type': 'application/json; charset=UTF-8',\n            'token': this.props.cookies.get(COOKIE_NAMES.token)\n          },\n          signal: this.abortController.signal\n        }\n      )\n    ).json();\n\n    this.props.setAppLoading(false);\n    if (res.status !== 200) {\n      message.error(res.errors[0]);\n      return;\n    }\n\n    this.setState({ checkoutSessions: res.data.checkoutSessions });\n  }\n\n  render() {\n    const { checkoutSessions } = this.state;\n    return (\n      <div className=\"transaction-history animated fadeIn\">\n        <div className=\"transaction-history__header\">\n          <div className=\"transaction-history__header__title\">\n            <HistoryOutlined className=\"transaction-history__header__title__icon\" />\n            <span className=\"transaction-history__header__title__text\">Lịch sử giao dịch</span>\n          </div>\n        </div>\n        <div className=\"transaction-history__content animated bounceInUp\">\n          <div className=\"transaction-history__content__timeline\">\n            {checkoutSessions.length === 0 ? (\n              <div className=\"transaction-history__content__timeline__empty\">\n                <Empty description=\"Chưa có ghi nhận nào\" />\n              </div>\n            ) : (\n                <Timeline mode=\"left\">\n                  {checkoutSessions.map(cs => {\n                    return cs.soldItems.length > 0 ? (\n                      <Timeline.Item\n                        key={cs._id}\n                        label={cs.submittedAt ? moment(cs.submittedAt).format('DD-MM-YYYY HH:mm') : moment().format('DD-MM-YYYY HH:mm')}\n                        color=\"#ff8220\">\n                        <div className=\"transaction-history__content__timeline__item animated bounceIn\">\n                          <p className=\"transaction-history__content__timeline__item__list-products\">\n                            {cs.soldItems.map((item, index) => {\n                              return index < cs.soldItems.length - 1 ? (\n                                <span>{`${item.product.name} x${item.quantity}, `}</span>\n                              ) : (\n                                  <span>{`${item.product.name} x${item.quantity}.`}</span>\n                                )\n                            })}\n                          </p>\n                          <div className=\"transaction-history__content__timeline__item__price-total\">\n                            <span className=\"transaction-history__content__timeline__item__price-total__label\">\n                              Tổng tiền:\n                            </span>\n                            <NumberFormat\n                              className=\"transaction-history__content__timeline__item__price-total__number\"\n                              value={Number(cs.priceTotal)}\n                              displayType=\"text\"\n                              thousandSeparator={true}\n                              suffix=\" VNĐ\"\n                              style={{ fontWeight: 'bold' }}\n                            />\n                          </div>\n                        </div>\n                      </Timeline.Item>\n                    ) : <></>\n                  })}\n                </Timeline>\n              )}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\nexport default connect(null, actions)(withCookies(TransactionHistory));"]},"metadata":{},"sourceType":"module"}