{"ast":null,"code":"var _jsxFileName = \"/home/viettran/Desktop/cnpm-19hc-group04/final-project/front-end/src/components/pages/Manager/ImportingRequest/SupplierManagement/SupplierManagement.js\";\nimport React from 'react';\nimport { Row, Col, Input, Empty, Button, Divider, List, message } from 'antd';\nimport { SearchOutlined, DeleteOutlined, EnvironmentTwoTone } from '@ant-design/icons';\nimport './SupplierManagement.style.scss';\nimport { connect } from 'react-redux';\nimport { withCookies } from 'react-cookie';\nimport * as actions from '../../../../../redux/actions';\nimport PageBase from '../../../../utilities/PageBase/PageBase';\nimport { API } from '../../../../../constants/api.constant';\nimport { COOKIE_NAMES } from '../../../../../constants/cookie-name.constant';\nimport * as _ from 'lodash';\nimport AddSupplierDialog from './AddSupplierDialog/AddSupplierDialog';\nimport GoogleMap from '../../../../utilities/GoogleMap/GoogleMap';\nimport EditSupplierDialog from './EditSupplierDialog/EditSupplierDialog';\n\nclass SupplierManagement extends PageBase {\n  constructor(props) {\n    super(props);\n    this.state = {\n      suppliersDataSource: [],\n      filteredSuppliers: [],\n      selectedSupplier: {},\n      supplierSearchText: ''\n    };\n  }\n\n  componentDidMount() {\n    this.loadSuppliers();\n  }\n\n  async loadSuppliers() {\n    this.props.setAppLoading(true);\n    const res = await (await fetch(API.Manager.SupplierManagment.getSuppliers, {\n      method: 'GET',\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8',\n        'token': this.props.cookies.get(COOKIE_NAMES.token)\n      },\n      signal: this.abortController.signal\n    })).json();\n    this.props.setAppLoading(false);\n\n    if (res.status !== 200) {\n      message.error(res.errors[0]);\n      return;\n    }\n\n    const {\n      suppliers\n    } = res.data;\n    this.onSupplierSearchInputChange(this.state.supplierSearchText, suppliers);\n    this.setState({\n      suppliersDataSource: suppliers\n    });\n  }\n\n  onSupplierSearchInputChange(text, suppliersDataSource) {\n    let {\n      filteredSuppliers\n    } = this.state;\n\n    if (!text) {\n      filteredSuppliers = [...suppliersDataSource];\n    } else {\n      filteredSuppliers = suppliersDataSource.filter(s => {\n        const searchKeys = Object.keys(s).filter(k => ['name'].includes(k));\n\n        for (const k of searchKeys) {\n          if (s[k].toLowerCase().includes(text.toLowerCase())) return true;\n        }\n\n        return false;\n      });\n    }\n\n    this.setState({\n      filteredSuppliers,\n      selectedSupplier: filteredSuppliers.length > 0 ? filteredSuppliers[0] : {},\n      supplierSearchText: text\n    });\n  }\n\n  handleSelectSupplier(_id) {\n    const selectedSupplier = _.find(this.state.suppliersDataSource, s => s._id === _id);\n\n    this.setState({\n      selectedSupplier\n    });\n  }\n\n  addToSuppliersDataSource(supplier) {\n    let {\n      suppliersDataSource\n    } = this.state;\n    suppliersDataSource.push(supplier);\n    this.onSupplierSearchInputChange(this.state.supplierSearchText, suppliersDataSource);\n    this.setState({\n      suppliersDataSource\n    });\n  }\n\n  updateSuppliersDataSource(supplier) {\n    const {\n      suppliersDataSource\n    } = this.state;\n\n    const index = _.find(suppliersDataSource, s => s._id === supplier._id);\n\n    if (index < 0) return;\n    suppliersDataSource[index] = { ...supplier\n    };\n    this.onSupplierSearchInputChange(this.state.supplierSearchText, suppliersDataSource);\n    this.setState({\n      suppliersDataSource\n    });\n  }\n\n  render() {\n    const {\n      filteredSuppliers,\n      selectedSupplier\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: \"importing-request__container__suppliers\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"importing-request__container__suppliers__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"importing-request__container__suppliers__header__title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Nh\\xE0 cung c\\u1EA5p s\\u1EA3n ph\\u1EA9m\")), React.createElement(\"div\", {\n      className: \"importing-request__container__suppliers__toolbar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Row, {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 21,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Input, {\n      prefix: React.createElement(SearchOutlined, {\n        style: {\n          marginRight: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }),\n      placeholder: \"T\\xECm ki\\u1EBFm theo t\\xEAn, \\u0111\\u1ECBa ch\\u1EC9, \\u0111i\\u1EC7n tho\\u1EA1i...\",\n      onChange: e => this.onSupplierSearchInputChange(e.target.value, this.state.suppliersDataSource),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })), React.createElement(Col, {\n      span: 3,\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(AddSupplierDialog, {\n      addToSuppliersDataSource: supplier => this.addToSuppliersDataSource(supplier),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"importing-request__container__suppliers__list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(List, {\n      size: \"small\",\n      dataSource: filteredSuppliers,\n      renderItem: s => React.createElement(List.Item, {\n        onClick: () => this.handleSelectSupplier(s._id),\n        className: `importing-request__container__suppliers__list__item animated fadeIn \n                  ${selectedSupplier._id === s._id ? '--selected' : ''}\n                `,\n        key: s._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, s.name),\n      locale: {\n        emptyText: React.createElement(Empty, {\n          image: Empty.PRESENTED_IMAGE_SIMPLE,\n          description: \"Ch\\u01B0a c\\xF3 d\\u1EEF li\\u1EC7u\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        })\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"importing-request__container__suppliers__details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"importing-request__container__suppliers__details__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"importing-request__container__suppliers__details__header__title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Th\\xF4ng tin li\\xEAn h\\u1EC7\"), React.createElement(\"div\", {\n      className: \"importing-request__container__suppliers__details__header__toolbar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(EditSupplierDialog, {\n      supplier: { ...selectedSupplier\n      },\n      updateSuppliersDataSource: supplier => this.updateSuppliersDataSource(supplier),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), React.createElement(Button, {\n      shape: \"circle\",\n      icon: React.createElement(DeleteOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }),\n      className: \"importing-request__container__suppliers__details__header__toolbar__btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }))), React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"importing-request__container__suppliers__details__content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(Row, {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"importing-request__container__suppliers__details__content__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Th\\u01B0\\u01A1ng hi\\u1EC7u\")), React.createElement(Col, {\n      span: 18,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, selectedSupplier.name)), React.createElement(Row, {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"importing-request__container__suppliers__details__content__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\")), React.createElement(Col, {\n      span: 18,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, selectedSupplier.phone)), React.createElement(Row, {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"importing-request__container__suppliers__details__content__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"\\u0110\\u1ECBa ch\\u1EC9\")), React.createElement(Col, {\n      span: 18,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        minHeight: 35,\n        maxHeight: 35\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, selectedSupplier.address))), React.createElement(\"div\", {\n      className: \"importing-request__container__suppliers__details__content__map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(GoogleMap, {\n      width: '100%',\n      height: 200,\n      address: selectedSupplier.address,\n      locationIcon: React.createElement(EnvironmentTwoTone, {\n        twoToneColor: \"#ff8220\",\n        style: {\n          fontSize: 24\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default connect(null, actions)(withCookies(SupplierManagement));","map":{"version":3,"sources":["/home/viettran/Desktop/cnpm-19hc-group04/final-project/front-end/src/components/pages/Manager/ImportingRequest/SupplierManagement/SupplierManagement.js"],"names":["React","Row","Col","Input","Empty","Button","Divider","List","message","SearchOutlined","DeleteOutlined","EnvironmentTwoTone","connect","withCookies","actions","PageBase","API","COOKIE_NAMES","_","AddSupplierDialog","GoogleMap","EditSupplierDialog","SupplierManagement","constructor","props","state","suppliersDataSource","filteredSuppliers","selectedSupplier","supplierSearchText","componentDidMount","loadSuppliers","setAppLoading","res","fetch","Manager","SupplierManagment","getSuppliers","method","headers","cookies","get","token","signal","abortController","json","status","error","errors","suppliers","data","onSupplierSearchInputChange","setState","text","filter","s","searchKeys","Object","keys","k","includes","toLowerCase","length","handleSelectSupplier","_id","find","addToSuppliersDataSource","supplier","push","updateSuppliersDataSource","index","render","width","marginRight","e","target","value","name","emptyText","PRESENTED_IMAGE_SIMPLE","phone","minHeight","maxHeight","address","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Row, Col, Input, Empty, Button, Divider, List, message } from 'antd';\nimport { SearchOutlined, DeleteOutlined, EnvironmentTwoTone } from '@ant-design/icons';\nimport './SupplierManagement.style.scss';\nimport { connect } from 'react-redux';\nimport { withCookies } from 'react-cookie';\nimport * as actions from '../../../../../redux/actions';\nimport PageBase from '../../../../utilities/PageBase/PageBase';\nimport { API } from '../../../../../constants/api.constant';\nimport { COOKIE_NAMES } from '../../../../../constants/cookie-name.constant';\nimport * as _ from 'lodash';\nimport AddSupplierDialog from './AddSupplierDialog/AddSupplierDialog';\nimport GoogleMap from '../../../../utilities/GoogleMap/GoogleMap';\nimport EditSupplierDialog from './EditSupplierDialog/EditSupplierDialog';\n\nclass SupplierManagement extends PageBase {\n  constructor(props) {\n    super(props);\n    this.state = {\n      suppliersDataSource: [],\n      filteredSuppliers: [],\n      selectedSupplier: {},\n      supplierSearchText: ''\n    }\n  }\n\n  componentDidMount() {\n    this.loadSuppliers();\n  }\n\n  async loadSuppliers() {\n    this.props.setAppLoading(true);\n    const res = await (\n      await fetch(\n        API.Manager.SupplierManagment.getSuppliers,\n        {\n          method: 'GET',\n          headers: {\n            'Content-type': 'application/json; charset=UTF-8',\n            'token': this.props.cookies.get(COOKIE_NAMES.token)\n          },\n          signal: this.abortController.signal\n        }\n      )\n    ).json();\n\n    this.props.setAppLoading(false);\n    if (res.status !== 200) {\n      message.error(res.errors[0]);\n      return;\n    }\n\n    const { suppliers } = res.data;\n    this.onSupplierSearchInputChange(this.state.supplierSearchText, suppliers);\n    this.setState({ suppliersDataSource: suppliers });\n  }\n\n  onSupplierSearchInputChange(text, suppliersDataSource) {\n    let { filteredSuppliers } = this.state;\n    if (!text) {\n      filteredSuppliers = [...suppliersDataSource];\n    } else {\n      filteredSuppliers = suppliersDataSource.filter(s => {\n        const searchKeys = Object.keys(s).filter(k => ['name'].includes(k));\n        for (const k of searchKeys) {\n          if (s[k].toLowerCase().includes(text.toLowerCase()))\n            return true;\n        }\n        return false;\n      })\n    }\n\n    this.setState({\n      filteredSuppliers,\n      selectedSupplier: filteredSuppliers.length > 0 ? filteredSuppliers[0] : {},\n      supplierSearchText: text\n    });\n  }\n\n  handleSelectSupplier(_id) {\n    const selectedSupplier = _.find(this.state.suppliersDataSource, s => s._id === _id);\n    this.setState({ selectedSupplier });\n  }\n\n  addToSuppliersDataSource(supplier) {\n    let { suppliersDataSource } = this.state;\n    suppliersDataSource.push(supplier);\n    this.onSupplierSearchInputChange(this.state.supplierSearchText, suppliersDataSource);\n    this.setState({ suppliersDataSource });\n  }\n\n  updateSuppliersDataSource(supplier) {\n    const { suppliersDataSource } = this.state;\n    const index = _.find(suppliersDataSource, s => s._id === supplier._id);\n\n    if (index < 0)\n      return;\n\n    suppliersDataSource[index] = { ...supplier };\n    this.onSupplierSearchInputChange(this.state.supplierSearchText, suppliersDataSource);\n    this.setState({ suppliersDataSource });\n  }\n\n  render() {\n    const { filteredSuppliers, selectedSupplier } = this.state;\n    return (\n      <div className=\"importing-request__container__suppliers\">\n        <div className=\"importing-request__container__suppliers__header\">\n          <span className=\"importing-request__container__suppliers__header__title\">\n            Nhà cung cấp sản phẩm\n          </span>\n        </div>\n        <div className=\"importing-request__container__suppliers__toolbar\">\n          <Row style={{ width: '100%' }}>\n            <Col span={21}>\n              <Input\n                prefix={<SearchOutlined style={{ marginRight: 5 }} />}\n                placeholder=\"Tìm kiếm theo tên, địa chỉ, điện thoại...\"\n                onChange={e => this.onSupplierSearchInputChange(e.target.value, this.state.suppliersDataSource)}\n              />\n            </Col>\n            <Col span={3} align=\"center\">\n              <AddSupplierDialog\n                addToSuppliersDataSource={supplier => this.addToSuppliersDataSource(supplier)}\n              />\n            </Col>\n          </Row>\n        </div>\n        <div className=\"importing-request__container__suppliers__list\">\n          <List\n            size=\"small\"\n            dataSource={filteredSuppliers}\n            renderItem={s => (\n              <List.Item\n                onClick={() => this.handleSelectSupplier(s._id)}\n                className={`importing-request__container__suppliers__list__item animated fadeIn \n                  ${selectedSupplier._id === s._id ? '--selected' : ''}\n                `}\n                key={s._id}>\n                {s.name}\n              </List.Item>\n            )}\n            locale={{ emptyText: <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description=\"Chưa có dữ liệu\" /> }}\n          />\n        </div>\n        <div className=\"importing-request__container__suppliers__details\">\n          <div className=\"importing-request__container__suppliers__details__header\">\n            <span className=\"importing-request__container__suppliers__details__header__title\">\n              Thông tin liên hệ\n                    </span>\n            <div className=\"importing-request__container__suppliers__details__header__toolbar\">\n              <EditSupplierDialog\n                supplier={{ ...selectedSupplier }}\n                updateSuppliersDataSource={supplier => this.updateSuppliersDataSource(supplier)}\n              />\n\n              <Button\n                shape=\"circle\"\n                icon={<DeleteOutlined />}\n                className=\"importing-request__container__suppliers__details__header__toolbar__btn\"\n              />\n            </div>\n          </div>\n          <Divider />\n          <div className=\"importing-request__container__suppliers__details__content\">\n            <Row style={{ width: '100%' }}>\n              <Col span={6}>\n                <span className=\"importing-request__container__suppliers__details__content__label\">\n                  Thương hiệu\n                        </span>\n              </Col>\n              <Col span={18}>{selectedSupplier.name}</Col>\n            </Row>\n            <Row style={{ width: '100%' }}>\n              <Col span={6}>\n                <span className=\"importing-request__container__suppliers__details__content__label\">\n                  Số điện thoại\n                        </span>\n              </Col>\n              <Col span={18}>{selectedSupplier.phone}</Col>\n            </Row>\n            <Row style={{ width: '100%' }}>\n              <Col span={6}>\n                <span className=\"importing-request__container__suppliers__details__content__label\">\n                  Địa chỉ\n                        </span>\n              </Col>\n              <Col span={18}>\n                <p style={{ minHeight: 35, maxHeight: 35 }}>\n                  {selectedSupplier.address}\n                </p>\n              </Col>\n            </Row>\n\n            <div className=\"importing-request__container__suppliers__details__content__map\">\n              <GoogleMap\n                width={'100%'}\n                height={200}\n                address={selectedSupplier.address}\n                locationIcon={\n                  <EnvironmentTwoTone\n                    twoToneColor=\"#ff8220\"\n                    style={{ fontSize: 24 }}\n                  />\n                }\n              />\n            </div>\n\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\nexport default connect(null, actions)(withCookies(SupplierManagement));"]},"metadata":{},"sourceType":"module"}