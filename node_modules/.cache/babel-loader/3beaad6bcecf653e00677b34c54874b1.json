{"ast":null,"code":"var _jsxFileName = \"/home/viettran/Desktop/cnpm-19hc-group04/final-project/front-end/src/components/pages/Importer/ProductManagment/ProductManagement.js\";\nimport React, { Component } from 'react';\nimport './ProductManagement.style.scss';\nimport { Row, Col, Input, List, Button, Table, Badge, Form, message, InputNumber, Modal } from 'antd';\nimport { SearchOutlined, PlusOutlined, CloseOutlined, BellFilled, PlusCircleOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\nimport moment from 'moment';\nimport NumberFormat from 'react-number-format';\nimport ImageUploader from '../../../utilities/ImageUploader/ImageUploader';\nconst {\n  confirm\n} = Modal;\nconst layout = {\n  labelCol: {\n    span: 9\n  },\n  wrapperCol: {\n    span: 15\n  }\n};\nconst categories = [{\n  _id: 1,\n  name: 'Sữa tiệt trùng'\n}, {\n  _id: 2,\n  name: 'Dụng cụ làm bếp'\n}, {\n  _id: 3,\n  name: 'Văn phòng phẩm'\n}, {\n  _id: 4,\n  name: 'Đồ gia dụng'\n}];\nlet dataSource = [];\n\nfor (let i = 0; i < 20; i++) {\n  const data = {\n    \"name\": \"Sữa bò tươi có đường\",\n    \"image\": \"https://product.hstatic.net/1000074072/product/1l-c_-d__ng-min.png\",\n    \"price\": 8000,\n    \"availableQuantity\": 7,\n    \"_id\": \"5e70f8e809d06d1841aea689\" + i,\n    \"category\": {\n      \"name\": \"Sữa tiệt trùng\",\n      \"_id\": \"5e70eb4acac22205b7530292\",\n      \"createdAt\": \"2020-03-17T15:22:50.312Z\",\n      \"updatedAt\": \"2020-03-18T14:49:47.494Z\",\n      \"__v\": 10\n    },\n    \"supplier\": {\n      \"phone\": \"0999999999\",\n      \"address\": \"New York\",\n      \"_id\": \"5e70eb46cac22205b7530291\",\n      \"name\": \"Vinamilk\",\n      \"createdAt\": \"2020-03-17T15:22:46.783Z\",\n      \"updatedAt\": \"2020-03-18T14:49:47.609Z\",\n      \"__v\": 10\n    },\n    \"status\": 'SOLD_OUT',\n    \"createdAt\": \"2020-03-17T16:20:57.002Z\",\n    \"updatedAt\": \"2020-03-18T02:27:51.388Z\",\n    \"__v\": 0,\n    key: i\n  };\n  dataSource.push(data);\n}\n\nexport default class ProductManagement extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isProductDetailsPanelShown: false,\n      selectedProduct: { ...dataSource[0]\n      },\n      selectedCategory: { ...categories[0]\n      },\n      products: [...dataSource]\n    };\n    this.productDetailsFormRef = React.createRef();\n  }\n\n  toggleProductDetailsPanel(isToggled) {\n    this.setState({\n      isProductDetailsPanelShown: isToggled\n    });\n  }\n\n  handleSelectProduct(product) {\n    this.setState({\n      selectedProduct: product\n    });\n    this.toggleProductDetailsPanel(true);\n  }\n\n  handleSelectCategory(category) {\n    this.setState({\n      selectedCategory: category\n    });\n  }\n\n  updateProductDetails(values) {\n    const params = { ...values\n    };\n    let {\n      products,\n      selectedProduct\n    } = this.state;\n\n    for (const key in selectedProduct) {\n      if (key !== 'supplier') {\n        selectedProduct[key] = params[key];\n      } else {\n        selectedProduct[key].name = params[key];\n      }\n    }\n\n    for (let p of products) {\n      if (p._id === selectedProduct._id) {\n        p = {\n          key: p._id,\n          ...selectedProduct\n        };\n        break;\n      }\n    }\n\n    this.setState({\n      selectedProduct,\n      products\n    });\n    message.success('Cập nhật sản phẩm thành công');\n  }\n\n  openRemoveProductDialog() {\n    const that = this;\n    confirm({\n      title: `Bạn có muốn xóa sản phẩm này?`,\n      icon: React.createElement(ExclamationCircleOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }),\n      content: '',\n      okText: 'Đồng ý',\n      okType: 'danger',\n      cancelText: 'Không, cảm ơn',\n\n      async onOk() {\n        const {\n          selectedProduct\n        } = that.state;\n        console.log(selectedProduct._id);\n      },\n\n      onCancel() {}\n\n    });\n  }\n\n  render() {\n    const {\n      selectedProduct\n    } = this.state;\n    const columns = [{\n      title: '',\n      dataIndex: 'image',\n      key: 'image',\n      width: 40,\n      render: text => React.createElement(\"img\", {\n        className: \"product-management__container__content__list-products__product-img\",\n        src: text,\n        alt: \"product\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      })\n    }, {\n      title: 'Sản phẩm',\n      dataIndex: 'name',\n      key: 'name',\n      width: 200\n    }, {\n      title: 'Nhà cung cấp',\n      dataIndex: 'supplier',\n      key: 'supplier',\n      width: 150,\n      render: (text, record) => React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, record.supplier.name)\n    }, {\n      title: 'Giá bán',\n      dataIndex: 'price',\n      key: 'price',\n      width: 100,\n      render: text => React.createElement(NumberFormat, {\n        value: Number(text),\n        displayType: \"text\",\n        thousandSeparator: true,\n        suffix: \" VN\\u0110\",\n        style: {\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      })\n    }, {\n      title: 'SL có sẵn',\n      dataIndex: 'availableQuantity',\n      key: 'availableQuantity',\n      width: 120,\n      render: text => React.createElement(\"center\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, text)\n    }, {\n      title: 'Cập nhật lần cuối',\n      dataIndex: 'updatedAt',\n      key: 'updatedAt',\n      width: 150,\n      render: text => React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"L\\xFAc \", moment(text).format('HH:mm DD-MM-YYYY'))\n    }, {\n      title: 'Trạng thái',\n      dataIndex: 'status',\n      key: 'status',\n      width: 150,\n      render: text => React.createElement(\"center\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, text)\n    }];\n    return React.createElement(\"div\", {\n      className: \"product-management animated fadeIn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-management__container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-management__container__left-sidebar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-management__container__left-sidebar__title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(Row, {\n      align: \"middle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 20,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"product-management__container__left-sidebar__title__text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"Danh m\\u1EE5c s\\u1EA3n ph\\u1EA9m\")), React.createElement(Col, {\n      span: 4,\n      style: {\n        textAlign: 'right'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(PlusCircleOutlined, {\n      className: \"product-management__container__left-sidebar__title__btn-add-category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"product-management__container__left-sidebar__search-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(Input, {\n      prefix: React.createElement(SearchOutlined, {\n        style: {\n          marginRight: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }),\n      placeholder: \"T\\xECm ki\\u1EBFm danh m\\u1EE5c...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"product-management__container__left-sidebar__categories\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-management__container__left-sidebar__categories__wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(List, {\n      size: \"small\",\n      dataSource: categories,\n      renderItem: item => React.createElement(List.Item, {\n        onClick: () => this.handleSelectCategory(item),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: `\n                            product-management__container__left-sidebar__categories__item \n                            ${item._id === this.state.selectedCategory._id ? 'product-management__container__left-sidebar__categories__item--selected' : ''}\n                          `,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, item.name)),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }))))), React.createElement(Col, {\n      span: 20,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-management__container__topbar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(Row, {\n      align: \"middle\",\n      gutter: 40,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"product-management__container__topbar__title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, this.state.selectedCategory.name)), React.createElement(Col, {\n      span: 9,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-management__container__topbar__features\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-management__container__topbar__features__feature\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(Badge, {\n      count: 100,\n      overflowCount: 99,\n      className: \"product-management__container__topbar__features__feature__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(BellFilled, {\n      className: \"product-management__container__topbar__features__feature__icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }))))), React.createElement(Col, {\n      span: 7,\n      style: {\n        paddingRight: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-management__container__topbar__search-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, React.createElement(Input, {\n      prefix: React.createElement(SearchOutlined, {\n        style: {\n          marginRight: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }),\n      placeholder: \"T\\xECm ki\\u1EBFm s\\u1EA3n ph\\u1EA9m...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }))))), React.createElement(\"div\", {\n      className: \"product-management__container__content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, this.state.isProductDetailsPanelShown ? React.createElement(\"div\", {\n      className: \"product-management__container__content__product-details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-management__container__content__product-details__panel animated slideInRight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-management__container__content__product-details__panel__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, React.createElement(Button, {\n      shape: \"circle\",\n      icon: React.createElement(CloseOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }),\n      className: \"product-management__container__content__product-details__panel__header__btn-close\",\n      onClick: () => this.toggleProductDetailsPanel(false),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    })), React.createElement(Col, {\n      align: \"end\",\n      span: 20,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"link\",\n      className: \"product-management__container__content__product-details__panel__header__btn-remove-product\",\n      onClick: () => this.openRemoveProductDialog(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, \"X\\xF3a s\\u1EA3n ph\\u1EA9m\")))), React.createElement(\"div\", {\n      className: \"product-management__container__content__product-details__panel__product-details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-management__container__content__product-details__panel__product-details__img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(ImageUploader, {\n      defaultImageUrl: selectedProduct.image,\n      width: 150,\n      height: 150,\n      tooltipTitle: \"Thay \\u0111\\u1ED5i \\u1EA3nh\",\n      tooltipPlacement: \"bottom\",\n      onFinish: imageUrl => {\n        this.productDetailsFormRef.current.setFieldsValue({\n          image: imageUrl\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"product-management__container__content__product-details__panel__product-details__info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, React.createElement(Form, Object.assign({}, layout, {\n      ref: current => {\n        this.productDetailsFormRef.current = current;\n\n        if (this.productDetailsFormRef.current) {\n          this.productDetailsFormRef.current.setFieldsValue({\n            image: selectedProduct.image,\n            name: selectedProduct.name,\n            supplier: selectedProduct.supplier.name,\n            price: selectedProduct.price,\n            availableQuantity: selectedProduct.availableQuantity\n          });\n        }\n      },\n      onFinish: values => this.updateProductDetails(values),\n      onFinishFailed: () => message.error('Thông tin sản phẩm chưa đầy đủ'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }), React.createElement(Form.Item, {\n      name: \"image\",\n      rules: [{\n        required: true\n      }],\n      style: {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, React.createElement(Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      name: \"name\",\n      label: \"T\\xEAn s\\u1EA3n ph\\u1EA9m\",\n      rules: [{\n        required: true,\n        message: 'Vui lòng nhập tên sản phẩm'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, React.createElement(Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      name: \"supplier\",\n      label: \"Nh\\xE0 cung c\\u1EA5p\",\n      rules: [{\n        required: true,\n        message: 'Vui lòng nhập tên nhà cung cấp'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, React.createElement(Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      name: \"price\",\n      label: \"Gi\\xE1 b\\xE1n (VN\\u0110)\",\n      rules: [{\n        required: true,\n        message: 'Vui lòng nhập giá bán sản phẩm'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, React.createElement(InputNumber, {\n      formatter: value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ','),\n      parser: value => value.replace(/\\$\\s?|(,*)/g, ''),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      name: \"availableQuantity\",\n      label: \"S\\u1ED1 l\\u01B0\\u1EE3ng c\\xF3 s\\u1EB5n\",\n      rules: [{\n        required: true,\n        message: 'Vui lòng nhập số lượng có sẵn'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }, React.createElement(InputNumber, {\n      formatter: value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ','),\n      parser: value => value.replace(/\\$\\s?|(,*)/g, ''),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-management__container__content__product-details__panel__product-details__btn-update__wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      className: \"product-management__container__content__product-details__panel__product-details__btn-update__wrapper__btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, \"C\\u1EADp nh\\u1EADt s\\u1EA3n ph\\u1EA9m\")))))))) : React.createElement(React.Fragment, null), React.createElement(\"div\", {\n      className: \"product-management__container__content__list-products\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413\n      },\n      __self: this\n    }, React.createElement(Table, {\n      dataSource: [...this.state.products],\n      columns: columns,\n      scroll: {\n        y: 545\n      },\n      pagination: false,\n      onRow: record => {\n        return {\n          onClick: () => this.handleSelectProduct(record)\n        };\n      },\n      rowClassName: record => record._id === selectedProduct._id ? 'product-management__container__content__list-products__selected-row' : '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414\n      },\n      __self: this\n    })), React.createElement(Button, {\n      shape: \"circle\",\n      icon: React.createElement(PlusOutlined, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }),\n      className: \"product-management__container__content__btn-add-product\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428\n      },\n      __self: this\n    }))))));\n  }\n\n}","map":{"version":3,"sources":["/home/viettran/Desktop/cnpm-19hc-group04/final-project/front-end/src/components/pages/Importer/ProductManagment/ProductManagement.js"],"names":["React","Component","Row","Col","Input","List","Button","Table","Badge","Form","message","InputNumber","Modal","SearchOutlined","PlusOutlined","CloseOutlined","BellFilled","PlusCircleOutlined","ExclamationCircleOutlined","moment","NumberFormat","ImageUploader","confirm","layout","labelCol","span","wrapperCol","categories","_id","name","dataSource","i","data","key","push","ProductManagement","constructor","props","state","isProductDetailsPanelShown","selectedProduct","selectedCategory","products","productDetailsFormRef","createRef","toggleProductDetailsPanel","isToggled","setState","handleSelectProduct","product","handleSelectCategory","category","updateProductDetails","values","params","p","success","openRemoveProductDialog","that","title","icon","content","okText","okType","cancelText","onOk","console","log","onCancel","render","columns","dataIndex","width","text","record","supplier","Number","fontWeight","format","textAlign","marginRight","item","paddingRight","image","imageUrl","current","setFieldsValue","price","availableQuantity","error","required","display","value","replace","y","onClick"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './ProductManagement.style.scss';\nimport { Row, Col, Input, List, Button, Table, Badge, Form, message, InputNumber, Modal } from 'antd';\nimport { SearchOutlined, PlusOutlined, CloseOutlined, BellFilled, PlusCircleOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\nimport moment from 'moment';\nimport NumberFormat from 'react-number-format';\nimport ImageUploader from '../../../utilities/ImageUploader/ImageUploader';\n\nconst { confirm } = Modal;\n\nconst layout = {\n  labelCol: { span: 9 },\n  wrapperCol: { span: 15 },\n};\n\nconst categories = [\n  {\n    _id: 1,\n    name: 'Sữa tiệt trùng'\n  },\n  {\n    _id: 2,\n    name: 'Dụng cụ làm bếp'\n  },\n  {\n    _id: 3,\n    name: 'Văn phòng phẩm'\n  },\n  {\n    _id: 4,\n    name: 'Đồ gia dụng'\n  }\n];\n\nlet dataSource = [];\n\nfor (let i = 0; i < 20; i++) {\n  const data = {\n    \"name\": \"Sữa bò tươi có đường\",\n    \"image\": \"https://product.hstatic.net/1000074072/product/1l-c_-d__ng-min.png\",\n    \"price\": 8000,\n    \"availableQuantity\": 7,\n    \"_id\": \"5e70f8e809d06d1841aea689\" + i,\n    \"category\": {\n      \"name\": \"Sữa tiệt trùng\",\n      \"_id\": \"5e70eb4acac22205b7530292\",\n      \"createdAt\": \"2020-03-17T15:22:50.312Z\",\n      \"updatedAt\": \"2020-03-18T14:49:47.494Z\",\n      \"__v\": 10\n    },\n    \"supplier\": {\n      \"phone\": \"0999999999\",\n      \"address\": \"New York\",\n      \"_id\": \"5e70eb46cac22205b7530291\",\n      \"name\": \"Vinamilk\",\n      \"createdAt\": \"2020-03-17T15:22:46.783Z\",\n      \"updatedAt\": \"2020-03-18T14:49:47.609Z\",\n      \"__v\": 10\n    },\n    \"status\": 'SOLD_OUT',\n    \"createdAt\": \"2020-03-17T16:20:57.002Z\",\n    \"updatedAt\": \"2020-03-18T02:27:51.388Z\",\n    \"__v\": 0,\n    key: i\n  }\n  dataSource.push(data);\n}\n\nexport default class ProductManagement extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isProductDetailsPanelShown: false,\n      selectedProduct: { ...dataSource[0] },\n      selectedCategory: { ...categories[0] },\n      products: [...dataSource]\n    }\n\n    this.productDetailsFormRef = React.createRef();\n  }\n\n  toggleProductDetailsPanel(isToggled) {\n    this.setState({ isProductDetailsPanelShown: isToggled });\n  }\n\n  handleSelectProduct(product) {\n    this.setState({ selectedProduct: product });\n    this.toggleProductDetailsPanel(true);\n  }\n\n  handleSelectCategory(category) {\n    this.setState({ selectedCategory: category });\n  }\n\n  updateProductDetails(values) {\n    const params = { ...values };\n\n    let { products, selectedProduct } = this.state;\n\n    for (const key in selectedProduct) {\n      if (key !== 'supplier') {\n        selectedProduct[key] = params[key];\n      } else {\n        selectedProduct[key].name = params[key];\n      }\n    }\n\n    for (let p of products) {\n      if (p._id === selectedProduct._id) {\n        p = { key: p._id, ...selectedProduct };\n        break;\n      }\n    }\n\n    this.setState({ selectedProduct, products });\n    message.success('Cập nhật sản phẩm thành công');\n  }\n\n  openRemoveProductDialog() {\n    const that = this;\n    confirm({\n      title: `Bạn có muốn xóa sản phẩm này?`,\n      icon: <ExclamationCircleOutlined />,\n      content: '',\n      okText: 'Đồng ý',\n      okType: 'danger',\n      cancelText: 'Không, cảm ơn',\n      async onOk() {\n        const { selectedProduct } = that.state;\n        console.log(selectedProduct._id);\n      },\n      onCancel() { },\n    });\n  }\n\n  render() {\n    const { selectedProduct } = this.state;\n\n    const columns = [\n      {\n        title: '',\n        dataIndex: 'image',\n        key: 'image',\n        width: 40,\n        render: (text) => (\n          <img\n            className=\"product-management__container__content__list-products__product-img\"\n            src={text}\n            alt=\"product\" />\n        )\n      },\n      {\n        title: 'Sản phẩm',\n        dataIndex: 'name',\n        key: 'name',\n        width: 200\n      },\n      {\n        title: 'Nhà cung cấp',\n        dataIndex: 'supplier',\n        key: 'supplier',\n        width: 150,\n        render: (text, record) => (<span>{record.supplier.name}</span>)\n      },\n      {\n        title: 'Giá bán',\n        dataIndex: 'price',\n        key: 'price',\n        width: 100,\n        render: (text) => (\n          <NumberFormat\n            value={Number(text)}\n            displayType=\"text\"\n            thousandSeparator={true}\n            suffix=\" VNĐ\"\n            style={{ fontWeight: 'bold' }}\n          />\n        )\n      },\n      {\n        title: 'SL có sẵn',\n        dataIndex: 'availableQuantity',\n        key: 'availableQuantity',\n        width: 120,\n        render: (text) => (<center>{text}</center>),\n      },\n      {\n        title: 'Cập nhật lần cuối',\n        dataIndex: 'updatedAt',\n        key: 'updatedAt',\n        width: 150,\n        render: (text) => (<span>Lúc {moment(text).format('HH:mm DD-MM-YYYY')}</span>)\n      },\n      {\n        title: 'Trạng thái',\n        dataIndex: 'status',\n        key: 'status',\n        width: 150,\n        render: (text) => (<center>{text}</center>),\n      }\n    ];\n\n    return (\n      <div className=\"product-management animated fadeIn\">\n\n        <div className=\"product-management__container\">\n          <Row>\n            <Col span={4}>\n              <div className=\"product-management__container__left-sidebar\">\n                <div className=\"product-management__container__left-sidebar__title\">\n                  <Row align=\"middle\">\n                    <Col span={20}>\n                      <span className=\"product-management__container__left-sidebar__title__text\">\n                        Danh mục sản phẩm\n                      </span>\n                    </Col>\n                    <Col span={4} style={{ textAlign: 'right' }}>\n                      <PlusCircleOutlined className=\"product-management__container__left-sidebar__title__btn-add-category\" />\n                    </Col>\n                  </Row>\n                </div>\n                <div className=\"product-management__container__left-sidebar__search-box\">\n                  <Input\n                    prefix={<SearchOutlined style={{ marginRight: 5 }} />}\n                    placeholder=\"Tìm kiếm danh mục...\" />\n                </div>\n                <div className=\"product-management__container__left-sidebar__categories\">\n                  <div className=\"product-management__container__left-sidebar__categories__wrapper\">\n                    <List\n                      size=\"small\"\n                      dataSource={categories}\n                      renderItem={(item) => (\n                        <List.Item onClick={() => this.handleSelectCategory(item)}>\n                          <div className={`\n                            product-management__container__left-sidebar__categories__item \n                            ${item._id === this.state.selectedCategory._id ? 'product-management__container__left-sidebar__categories__item--selected' : ''}\n                          `}>\n                            {item.name}\n                          </div>\n                        </List.Item>\n                      )}\n                    />\n                  </div>\n                </div>\n              </div>\n            </Col>\n            <Col span={20}>\n              <div className=\"product-management__container__topbar\">\n                <Row align=\"middle\" gutter={40}>\n                  <Col span={8}>\n                    <h3 className=\"product-management__container__topbar__title\">\n                      {this.state.selectedCategory.name}\n                    </h3>\n                  </Col>\n                  <Col span={9}>\n                    <div className=\"product-management__container__topbar__features\">\n                      <div className=\"product-management__container__topbar__features__feature\">\n                        <Badge count={100} overflowCount={99} className=\"product-management__container__topbar__features__feature__label\">\n                          <BellFilled className=\"product-management__container__topbar__features__feature__icon\" />\n                        </Badge>\n                      </div>\n                    </div>\n                  </Col>\n                  <Col span={7} style={{ paddingRight: 0 }}>\n                    <div className=\"product-management__container__topbar__search-box\">\n                      <Input\n                        prefix={<SearchOutlined style={{ marginRight: 5 }} />}\n                        placeholder=\"Tìm kiếm sản phẩm...\" />\n                    </div>\n                  </Col>\n                </Row>\n              </div>\n              <div className=\"product-management__container__content\">\n                {this.state.isProductDetailsPanelShown ? (\n                  <div className=\"product-management__container__content__product-details\">\n                    <div className=\"product-management__container__content__product-details__panel animated slideInRight\">\n                      <div className=\"product-management__container__content__product-details__panel__header\">\n                        <Row>\n                          <Col span={4}>\n                            <Button\n                              shape=\"circle\"\n                              icon={<CloseOutlined />}\n                              className=\"product-management__container__content__product-details__panel__header__btn-close\"\n                              onClick={() => this.toggleProductDetailsPanel(false)}\n                            />\n                          </Col>\n                          <Col align=\"end\" span={20}>\n                            <Button\n                              type=\"link\"\n                              className=\"product-management__container__content__product-details__panel__header__btn-remove-product\"\n                              onClick={() => this.openRemoveProductDialog()}\n                            >\n                              Xóa sản phẩm\n                            </Button>\n                          </Col>\n                        </Row>\n                      </div>\n                      <div className=\"product-management__container__content__product-details__panel__product-details\">\n                        <div className=\"product-management__container__content__product-details__panel__product-details__img\">\n                          <ImageUploader\n                            defaultImageUrl={selectedProduct.image}\n                            width={150}\n                            height={150}\n                            tooltipTitle=\"Thay đổi ảnh\"\n                            tooltipPlacement=\"bottom\"\n                            onFinish={imageUrl => {\n                              this.productDetailsFormRef.current.setFieldsValue({\n                                image: imageUrl\n                              });\n                            }}\n                          />\n                        </div>\n                        <div className=\"product-management__container__content__product-details__panel__product-details__info\">\n                          <Form\n                            {...layout}\n                            ref={current => {\n                              this.productDetailsFormRef.current = current;\n                              if (this.productDetailsFormRef.current) {\n                                this.productDetailsFormRef.current.setFieldsValue({\n                                  image: selectedProduct.image,\n                                  name: selectedProduct.name,\n                                  supplier: selectedProduct.supplier.name,\n                                  price: selectedProduct.price,\n                                  availableQuantity: selectedProduct.availableQuantity\n                                });\n                              }\n                            }}\n                            onFinish={values => this.updateProductDetails(values)}\n                            onFinishFailed={() => message.error('Thông tin sản phẩm chưa đầy đủ')}\n                          >\n\n                            <Form.Item name=\"image\" rules={[{ required: true }]} style={{ display: 'none' }}>\n                              <Input />\n                            </Form.Item>\n\n                            <Form.Item\n                              name=\"name\"\n                              label=\"Tên sản phẩm\"\n                              rules={[\n                                {\n                                  required: true,\n                                  message: 'Vui lòng nhập tên sản phẩm'\n                                }\n                              ]}\n                            >\n                              <Input />\n                            </Form.Item>\n\n                            <Form.Item\n                              name=\"supplier\"\n                              label=\"Nhà cung cấp\"\n                              rules={[\n                                {\n                                  required: true,\n                                  message: 'Vui lòng nhập tên nhà cung cấp'\n                                }\n                              ]}\n                            >\n                              <Input />\n                            </Form.Item>\n\n                            <Form.Item\n                              name=\"price\"\n                              label=\"Giá bán (VNĐ)\"\n                              rules={[\n                                {\n                                  required: true,\n                                  message: 'Vui lòng nhập giá bán sản phẩm'\n                                }\n                              ]}\n                            >\n                              <InputNumber\n                                formatter={value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n                                parser={value => value.replace(/\\$\\s?|(,*)/g, '')}\n                              />\n                            </Form.Item>\n\n                            <Form.Item\n                              name=\"availableQuantity\"\n                              label=\"Số lượng có sẵn\"\n                              rules={[\n                                {\n                                  required: true,\n                                  message: 'Vui lòng nhập số lượng có sẵn'\n                                }\n                              ]}\n                            >\n                              <InputNumber\n                                formatter={value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n                                parser={value => value.replace(/\\$\\s?|(,*)/g, '')}\n                              />\n                            </Form.Item>\n\n                            <Form.Item>\n                              <div className=\"product-management__container__content__product-details__panel__product-details__btn-update__wrapper\">\n                                <Button\n                                  type=\"primary\"\n                                  htmlType=\"submit\"\n                                  className=\"product-management__container__content__product-details__panel__product-details__btn-update__wrapper__btn\"\n                                >\n                                  Cập nhật sản phẩm\n                                </Button>\n                              </div>\n                            </Form.Item>\n\n                          </Form>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ) : <></>}\n                <div className=\"product-management__container__content__list-products\">\n                  <Table\n                    dataSource={[...this.state.products]}\n                    columns={columns}\n                    scroll={{ y: 545 }}\n                    pagination={false}\n                    onRow={(record) => {\n                      return {\n                        onClick: () => this.handleSelectProduct(record)\n                      }\n                    }}\n                    rowClassName={record => record._id === selectedProduct._id ?\n                      'product-management__container__content__list-products__selected-row' : ''}\n                  />\n                </div>\n                <Button\n                  shape=\"circle\"\n                  icon={<PlusOutlined />}\n                  className=\"product-management__container__content__btn-add-product\"\n                />\n              </div>\n            </Col>\n          </Row>\n        </div>\n\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}