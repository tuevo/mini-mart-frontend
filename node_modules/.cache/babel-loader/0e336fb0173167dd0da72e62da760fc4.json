{"ast":null,"code":"var _jsxFileName = \"/home/viettran/Desktop/cnpm-19hc-group04/final-project/front-end/src/components/pages/Manager/Reporting/WorkScheduleReport/WorkScheduleReport.js\";\nimport React, { Component } from 'react';\nimport { Card, Modal, Avatar, Input, Radio, Row, Col, Empty, Button } from 'antd';\nimport { SearchOutlined, PrinterFilled } from '@ant-design/icons';\nimport { withCookies } from 'react-cookie';\nimport './WorkScheduleReport.style.scss';\nimport USER_ROLES from '../../../../../constants/user-role.constant';\nimport WorkScheduleReportToPrint from './WorkScheduleReportToPrint/WorkScheduleReportToPrint';\nimport ReactToPrint from 'react-to-print';\nimport moment from 'moment';\nconst {\n  Meta\n} = Card;\n\nclass WorkScheduleReport extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isVisible: false,\n      filteredStaffs: [],\n      searchText: '',\n      selectedStaff: null\n    };\n  }\n\n  setDialogVisible(isVisible) {\n    if (isVisible) {\n      let {\n        filteredStaffs\n      } = this.state;\n      filteredStaffs = [...this.props.staffs];\n      this.setState({\n        filteredStaffs,\n        selectedStaff: filteredStaffs.length > 0 ? filteredStaffs[0]._id : null\n      });\n    } else {\n      this.setState({\n        searchText: '',\n        selectedStaff: null\n      });\n    }\n\n    this.setState({\n      isVisible\n    });\n  }\n\n  onSelectStaff(staffID) {\n    this.setState({\n      selectedStaff: staffID\n    });\n  }\n\n  onSearchInputChange(text) {\n    this.setState({\n      searchText: text\n    });\n    const {\n      staffs\n    } = this.props;\n    let {\n      filteredStaffs\n    } = this.state;\n\n    if (!text) {\n      filteredStaffs = [...staffs];\n    } else {\n      filteredStaffs = staffs.filter(s => s.fullname.toLowerCase().includes(text.toLowerCase())) || [];\n    }\n\n    this.setState({\n      filteredStaffs,\n      selectedStaff: filteredStaffs.length > 0 ? filteredStaffs[0]._id : null\n    });\n  }\n\n  render() {\n    const {\n      basicInfo,\n      index\n    } = this.props;\n    let {\n      filteredStaffs,\n      selectedStaff\n    } = this.state;\n    console.log(moment().subtract(1, 'weeks').startOf('isoWeek').format('DD-MM-YYYY'));\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(Card, {\n      className: `reporting__menu__item`,\n      style: {\n        width: '100%',\n        animationDuration: `${0.5 * (index + 1)}s`\n      },\n      cover: React.createElement(\"img\", {\n        alt: \"example\",\n        src: basicInfo.cover,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }),\n      onClick: () => this.setDialogVisible(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(Meta, {\n      title: basicInfo.title,\n      description: basicInfo.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    })), React.createElement(Modal, {\n      className: \"reporting__work-schedule-report__content\",\n      title: React.createElement(\"span\", {\n        style: {\n          color: '#ff8220'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, basicInfo.title),\n      visible: this.state.isVisible,\n      onCancel: () => this.setDialogVisible(false),\n      cancelButtonProps: {\n        style: {\n          display: 'none'\n        }\n      },\n      okButtonProps: {\n        style: {\n          display: 'none'\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(Row, {\n      gutter: 20,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 9,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"reporting__work-schedule-report\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"reporting__work-schedule-report__list-staffs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"reporting__work-schedule-report__list-staffs__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"L\\u1EF1a ch\\u1ECDn nh\\xE2n vi\\xEAn:\"), React.createElement(Input, {\n      defaultValue: this.state.searchText,\n      prefix: React.createElement(SearchOutlined, {\n        style: {\n          marginRight: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }),\n      placeholder: \"T\\xECm ki\\u1EBFm nh\\xE2n vi\\xEAn...\",\n      onChange: e => this.onSearchInputChange(e.target.value),\n      autoFocus: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"reporting__work-schedule-report__list-staffs__wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, filteredStaffs.length === 0 ? React.createElement(Empty, {\n      image: Empty.PRESENTED_IMAGE_SIMPLE,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }) : React.createElement(React.Fragment, null), React.createElement(Radio.Group, {\n      style: {\n        width: '100%'\n      },\n      onChange: e => this.onSelectStaff(e.target.value),\n      defaultValue: selectedStaff,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, filteredStaffs.map(staff => React.createElement(Radio.Button, {\n      key: staff._id,\n      value: staff._id,\n      className: `\n                        reporting__work-schedule-report__list-staffs__staff \n                        ${staff._id === selectedStaff ? 'reporting__work-schedule-report__list-staffs__staff--selected' : ''} \n                      `,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"reporting__work-schedule-report__list-staffs__staff__avatar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(Avatar, {\n      size: 30,\n      src: staff.avatar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      span: 22,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"reporting__work-schedule-report__list-staffs__staff__info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"reporting__work-schedule-report__list-staffs__staff__info__name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, staff.fullname)), React.createElement(\"div\", {\n      className: \"reporting__work-schedule-report__list-staffs__staff__info__role\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, USER_ROLES[staff.role].name))))))))))), React.createElement(ReactToPrint, {\n      trigger: () => React.createElement(\"div\", {\n        className: \"reporting__work-schedule-report__content__btn-print\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        disabled: !selectedStaff,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(PrinterFilled, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }), \"In b\\xE1o c\\xE1o\")),\n      content: () => this.componentToPrintRef,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })), React.createElement(Col, {\n      span: 15,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"reporting__work-schedule-report__content__print-preview\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(WorkScheduleReportToPrint, {\n      ref: el => this.componentToPrintRef = el,\n      staff: selectedStaff ? filteredStaffs.find(s => s._id === selectedStaff) : null,\n      basicInfo: basicInfo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport default withCookies(WorkScheduleReport);","map":{"version":3,"sources":["/home/viettran/Desktop/cnpm-19hc-group04/final-project/front-end/src/components/pages/Manager/Reporting/WorkScheduleReport/WorkScheduleReport.js"],"names":["React","Component","Card","Modal","Avatar","Input","Radio","Row","Col","Empty","Button","SearchOutlined","PrinterFilled","withCookies","USER_ROLES","WorkScheduleReportToPrint","ReactToPrint","moment","Meta","WorkScheduleReport","constructor","props","state","isVisible","filteredStaffs","searchText","selectedStaff","setDialogVisible","staffs","setState","length","_id","onSelectStaff","staffID","onSearchInputChange","text","filter","s","fullname","toLowerCase","includes","render","basicInfo","index","console","log","subtract","startOf","format","width","animationDuration","cover","title","description","color","style","display","marginRight","e","target","value","PRESENTED_IMAGE_SIMPLE","map","staff","avatar","role","name","componentToPrintRef","el","find"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Card, Modal, Avatar, Input, Radio, Row, Col, Empty, Button } from 'antd';\nimport { SearchOutlined, PrinterFilled } from '@ant-design/icons';\nimport { withCookies } from 'react-cookie';\nimport './WorkScheduleReport.style.scss';\nimport USER_ROLES from '../../../../../constants/user-role.constant';\nimport WorkScheduleReportToPrint from './WorkScheduleReportToPrint/WorkScheduleReportToPrint';\nimport ReactToPrint from 'react-to-print';\nimport moment from 'moment';\n\nconst { Meta } = Card;\n\nclass WorkScheduleReport extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isVisible: false,\n      filteredStaffs: [],\n      searchText: '',\n      selectedStaff: null\n    }\n  }\n\n  setDialogVisible(isVisible) {\n    if (isVisible) {\n      let { filteredStaffs } = this.state;\n      filteredStaffs = [...this.props.staffs];\n\n      this.setState({\n        filteredStaffs,\n        selectedStaff: filteredStaffs.length > 0 ? filteredStaffs[0]._id : null\n      });\n    } else {\n      this.setState({\n        searchText: '',\n        selectedStaff: null\n      });\n    }\n\n    this.setState({ isVisible });\n  }\n\n  onSelectStaff(staffID) {\n    this.setState({ selectedStaff: staffID });\n  }\n\n  onSearchInputChange(text) {\n    this.setState({ searchText: text });\n\n    const { staffs } = this.props;\n    let { filteredStaffs } = this.state;\n\n    if (!text) {\n      filteredStaffs = [...staffs];\n    } else {\n      filteredStaffs = (staffs.filter(s => s.fullname.toLowerCase().includes(text.toLowerCase()))) || [];\n    }\n\n    this.setState({\n      filteredStaffs,\n      selectedStaff: filteredStaffs.length > 0 ? filteredStaffs[0]._id : null\n    });\n  }\n\n  render() {\n    const { basicInfo, index } = this.props;\n    let { filteredStaffs, selectedStaff } = this.state;\n\n    console.log(moment().subtract(1, 'weeks').startOf('isoWeek').format('DD-MM-YYYY'));\n\n    return (\n      <div>\n        <Card\n          className={`reporting__menu__item`}\n          style={{ width: '100%', animationDuration: `${0.5 * (index + 1)}s` }}\n          cover={\n            <img\n              alt=\"example\"\n              src={basicInfo.cover}\n            />\n          }\n          onClick={() => this.setDialogVisible(true)}\n        >\n          <Meta\n            title={basicInfo.title}\n            description={basicInfo.description}\n          />\n        </Card>\n\n        <Modal\n          className=\"reporting__work-schedule-report__content\"\n          title={<span style={{ color: '#ff8220' }}>{basicInfo.title}</span>}\n          visible={this.state.isVisible}\n          onCancel={() => this.setDialogVisible(false)}\n          cancelButtonProps={{ style: { display: 'none' } }}\n          okButtonProps={{ style: { display: 'none' } }}\n        >\n          <Row gutter={20}>\n            <Col span={9}>\n              <div className=\"reporting__work-schedule-report\">\n                <div className=\"reporting__work-schedule-report__list-staffs\">\n\n                  <span className=\"reporting__work-schedule-report__list-staffs__label\">\n                    Lựa chọn nhân viên:\n                  </span>\n\n                  <Input\n                    defaultValue={this.state.searchText}\n                    prefix={<SearchOutlined style={{ marginRight: 5 }} />}\n                    placeholder=\"Tìm kiếm nhân viên...\"\n                    onChange={e => this.onSearchInputChange(e.target.value)}\n                    autoFocus={true}\n                  />\n\n                  <div className=\"reporting__work-schedule-report__list-staffs__wrapper\">\n                    {filteredStaffs.length === 0 ? (\n                      <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />\n                    ) : <></>}\n                    <Radio.Group\n                      style={{ width: '100%' }}\n                      onChange={e => this.onSelectStaff(e.target.value)}\n                      defaultValue={selectedStaff}\n                    >\n\n                      {filteredStaffs.map(staff => (\n                        <Radio.Button\n                          key={staff._id}\n                          value={staff._id}\n                          className={`\n                        reporting__work-schedule-report__list-staffs__staff \n                        ${staff._id === selectedStaff ? 'reporting__work-schedule-report__list-staffs__staff--selected' : ''} \n                      `}>\n                          <Row>\n                            <Col span={2}>\n                              <div className=\"reporting__work-schedule-report__list-staffs__staff__avatar\">\n                                <Avatar size={30} src={staff.avatar} /></div>\n                            </Col>\n                            <Col span={22}>\n                              <div className=\"reporting__work-schedule-report__list-staffs__staff__info\">\n                                <div className=\"reporting__work-schedule-report__list-staffs__staff__info__name\">\n                                  <span>{staff.fullname}</span>\n                                </div>\n\n                                <div className=\"reporting__work-schedule-report__list-staffs__staff__info__role\">\n                                  <span>{USER_ROLES[staff.role].name}</span>\n                                </div>\n                              </div>\n                            </Col>\n                          </Row>\n                        </Radio.Button>\n                      ))}\n                    </Radio.Group>\n                  </div>\n                </div>\n              </div>\n\n              <ReactToPrint\n                trigger={() => (\n                  <div className=\"reporting__work-schedule-report__content__btn-print\">\n                    <Button type=\"primary\" disabled={!selectedStaff}>\n                      <PrinterFilled />\n                      In báo cáo\n                    </Button>\n                  </div>\n                )}\n                content={() => this.componentToPrintRef}\n              />\n\n            </Col>\n\n            <Col span={15}>\n              <div className=\"reporting__work-schedule-report__content__print-preview\">\n                <WorkScheduleReportToPrint\n                  ref={el => (this.componentToPrintRef = el)}\n                  staff={selectedStaff ? filteredStaffs.find(s => s._id === selectedStaff) : null}\n                  basicInfo={basicInfo}\n                />\n              </div>\n            </Col>\n\n          </Row>\n\n        </Modal>\n\n      </div>\n    )\n  }\n}\n\nexport default withCookies(WorkScheduleReport);"]},"metadata":{},"sourceType":"module"}